<!DOCTYPE html>
<html>
<head>
  <title>Resize test</title>
  <script src="./movies.js"></script>
</head>
<body>
<p>Seconds to reisze 100 images: <b id="total">calculating ...</b> seconds</p>
<p>Click on the image to see original image</p>
<table>
  <tr>
    <td>Resize to width</td><td><input type="text" id="r_width" value="200" /> <button onclick="draw_thumbs(document.getElementById('r_width').value)">Go!</button></td>
  </tr>
  <tr>
    <td>Crop to width-height</td><td><input id="r_crop" value="200x200" /> <button onclick="v=document.getElementById('r_crop').value; draw_thumbs(v+'x'+v)">Go!</button></td>
  </tr>
</table>
<br />
<br />
<div id="target" onload="alert(1)"></div>
<script>
window.r_time = function() {
  document.getElementById('total').innerHTML = (new Date() - window.start)/1000
}

window.r_host = 'http://0.0.0.0:4000/'

window.draw_thumbs = function(size) {
  var width = String(size).split('x')[0];
  var target = document.getElementById('target');

  target.innerHTML = '';

  window.start = new Date();

  for (var i=0; i<100; i++) {
    target.innerHTML += '<a href="'+imgs[i]+'"><img onload="r_time()" style="width:'+width+'px; -height:300px; border:1px solid #aaa; margin-right:10px; margin-bottom:10px;" src="'+r_host+'r?size='+size+'&image='+imgs[i]+'" /></a>'
  }
}

draw_thumbs(200);
</script>

</body>
</html>